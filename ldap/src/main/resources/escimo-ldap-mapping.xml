<?xml version="1.0"?>
<entities>
    <schema id="user-core" uri="urn:scim:schemas:core:1.0">
        <attribute name="id" mappedTo="entryUUID" />
        <attribute name="userName" mappedTo="uid" />
        <attribute name="displayName" mappedTo="displayName" />
        <attribute name="nickName" mappedTo="" />
        <attribute name="profileUrl" mappedTo="" />
        <attribute name="title" mappedTo="title" />
        <attribute name="userType" mappedTo="employeeType" />
        <attribute name="preferredLanguage" mappedTo="preferredLanguage" />
        <attribute name="locale" mappedTo="" />
        <attribute name="timezone" mappedTo="" />
        <attribute name="active" handlerRef="activeHandler" />
        <attribute name="password" show="false" mappedTo="userPassword" />

        <complex-attribute name="name">
            <at-group>
                <attribute name="familyName" mappedTo="sn" />
                <attribute name="givenName" mappedTo="cn" />
                <attribute name="middleName" mappedTo="" />
                <attribute name="honorificPrefix" mappedTo="title" />
                <attribute name="honorificSuffix" mappedTo="" />
                <formatted format="$givenName $familyName" />
            </at-group>
        </complex-attribute>

        <multival-attribute name="emails">
            <type name="work" primary="true">
                <at-group>
                    <attribute name="value" mappedTo="mail" />
                </at-group>
            </type>
        </multival-attribute>

        <multival-attribute name="phoneNumbers">
            <type name="work" primary="true">
                <at-group>
                    <attribute name="value" mappedTo="telephoneNumber" />
                </at-group>
            </type>
            <type name="home" primary="false">
                <at-group>
                    <attribute name="value" mappedTo="homePhone" />
                </at-group>
            </type>
        </multival-attribute>

        <multival-attribute name="ims">
        </multival-attribute>

        <multival-attribute name="photos">
            <type name="photo" primary="true">
                <at-group>
                    <attribute name="value" mappedTo="jpegPhoto" />
                </at-group>
            </type>
        </multival-attribute>

        <multival-attribute name="addresses">
            <type name="work" primary="true">
                <at-group>
                    <attribute name="streetAddress" mappedTo="street" />
                    <attribute name="locality" mappedTo="l" />
                    <attribute name="region" mappedTo="region" />
                    <attribute name="postalCode" mappedTo="postalCode" />
                    <attribute name="country" mappedTo="" />
                    <formatted format="$streetAddress $locality" />
                </at-group>
            </type>
        </multival-attribute>

        <multival-attribute name="groups">
            <at-group>
                <attribute name="value" mappedTo="member" />
            </at-group>
        </multival-attribute>

        <complex-attribute name="meta">
            <at-group>
                <attribute name="created" mappedTo="createTimestamp" />
                <attribute name="lastModified" mappedTo="lastModifiedTimestamp" />
            </at-group>
        </complex-attribute>

    </schema>

    <schema id="group" uri="urn:scim:schemas:core:1.0">
        <attribute name="displayName" mappedTo="cn" />
        <attribute name="id" mappedTo="entryUUID" />
        <complex-attribute name="members">
            <at-group>
                <attribute name="streetAddress" mappedTo="street" />
                <attribute name="locality" mappedTo="l" />
                <attribute name="region" mappedTo="region" />
                <attribute name="postalCode" mappedTo="postalCode" />
                <attribute name="country" mappedTo="" />
                <formatted format="$streetAddress $locality" />
            </at-group>
        </complex-attribute>

    </schema>

    <userType basedDn="ou=system" filter="(objectClass = inetOrgPerson)">
        <schemaRef id="user-core" />
    </userType>

    <groupType basedDn="ou=system" filter="(objectClass = inetOrgPerson)">
        <schemaRef id="group" />
    </groupType>
 
    <atHandlers>
        <handler name="activeHandler"
            class="org.apache.directory.scim.ldap.handlers.ActiveAttributeHandler" />
    </atHandlers>
</entities>